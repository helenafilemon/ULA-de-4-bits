// somador_subtrator_4bits.v
module somador_subtrator_4bits(
    input  [3:0] a,
    input  [3:0] b,
    input        sub, // '1' para subtrair, '0' para somar
    output [3:0] dout,
    output       cout_borrow
);
    wire [3:0] b_inv;
    wire [4:0] temp_sum;

    // Inversão de B para subtração (a - b = a + ~b + 1)
    assign b_inv = b ^ {4{sub}};

    // Somador de 4 bits (carry look-ahead ou ripple-carry)
    assign temp_sum = a + b_inv + sub;

    assign dout = temp_sum[3:0];
    assign cout_borrow = temp_sum[4];

endmodule
